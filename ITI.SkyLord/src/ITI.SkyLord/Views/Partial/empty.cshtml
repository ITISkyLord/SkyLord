@model ITI.SkyLord.ViewModel.Partial.BuildingPartialViewModel
@using ITI.SkyLord.Services;

<h2>Terrain vierge</h2>

<div class="row">
    @foreach (var CurrentBuilding in Model.AvailableBuildings)
    {
        <div class="col-sm-6 col-md-6">
            @{Write(CurrentBuilding.Name);}

            <br />
            @if (CurrentBuilding.Level != null)
            {

                Write(" Bois: " + CurrentBuilding.Level.Cost.Wood + " Cristal:  " + CurrentBuilding.Level.Cost.Cristal + " Metal: " + CurrentBuilding.Level.Cost.Metal + " Magie: " + CurrentBuilding.Level.Cost.Magic);
            }
            else
            {
                Write(" Pas disponible");
            }
            <br />

            <form asp-route-islandId="@Model.Layout.CurrentIsland.IslandId" asp-controller="Building" asp-action="AddBuilding">
                <input type="hidden" value="@Model.Position" asp-for="@Model.Position" />
                <input type="hidden" asp-for="@Model.TargetBuilding" value="@CurrentBuilding.BuildingName" />
                <div asp-validation-summary="ValidationSummary.All" class="text-danger"></div>

                @if (CurrentBuilding.Level != null && CurrentBuilding.Level.Cost != null && RessourceManager.IsEnough(Model.Layout.CurrentIsland.AllRessources, CurrentBuilding.Level.Cost))
                {
                    <input type="submit" value="Construire" name="Construire">
                }
                else
                {
                    @*<p>Pas assez</p>*@

                }

            </form>
        </div>
                }
</div>